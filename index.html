<!doctype html>
<title>Parallel Coordinates</title>
<link rel="stylesheet" type="text/css" href="parcoords.css">
<script src="d3.v2.js"></script>
<script src="parcoords.js"></script>
<style>
  body {
    font-size: 15px;
    font-family: "Helvetica Neue", Arial, Helvetica, sans-serif;
    margin: 50px auto 20px;
    width: 720px;
    background: #fcfcfc;
    line-height: 1.35em;
  }
  a {
    text-decoration: none;
  }
  ul {
    margin: 0 20px;
    padding: 0;
  }
  .dark {
    background: #222;
  }
  #example,
  #example-axes,
  #example1,
  #example2,
  #example3 {
    height: 200px;
    margin: 12px 0;
  }
  pre {
    color: #444;
    font-family: Ubuntu Mono, Monaco, monospace;
    padding: 4px 8px;
    background: #f2f2f2;
    border: 1px solid #ccc;
  }
  h1 small {
    font-weight: normal;
    font-size: 0.5em;
  }
  .float {
    float: left;
  }
  .centered {
    text-align: center;
  }
</style>
<a href="https://github.com/syntagmatic/parallel-coordinates"><img style="position: absolute; top: 0; right: 0; border: 0;" src="forkme.png" alt="Fork me on GitHub"></a>
<h1>Parallel Coordinates <small>(beta)</small></h1>
<p>An open-source library for exploring multi-dimensional datasets.</p>
<p><strong><a href="parcoords.js">parcoords.js</a></strong> <small> - requires <strong><a href="http://d3js.org/">D3.js</a></strong></small></p>
<p>This library is unstable and in development, but you're welcome to try it out.</p>
<ul>
  <li><a href="https://github.com/syntagmatic/parallel-coordinates#resources">Resources</a></li>
  <li><a href="https://github.com/syntagmatic/parallel-coordinates#parallel-coordinates">API Reference</a></li>
  <li><a href="https://github.com/syntagmatic/parallel-coordinates/issues">Issues</a></li>
</ul>

<h3>Getting Started</h3>
<div id="example" class="parcoords" style="width:360px;height:150px"></div>
<p>
Make a container div in HTML
</p>
<pre>
&lt;div id="<strong>example</strong>" class="parcoords" style="width:300px;height:150px"&gt;&lt;/div&gt;
</pre>
<p>
Make some data in JavaScript
</p>
<pre>
var <strong>data</strong> = [
  [1, 0.7, 2, 42],
  [0.4, 0.9, 1, 20],
  [0.9, 0.2, 3, 19],
  [0.1, 0, 1, 25]
];
</pre>
<p>
Create a parallel coordinates plot
</p>
<pre>
var pc = d3.parcoords()("#example")
  .data(data)
  .render()
  .createAxes();
</pre>
<script>
var data = [
  [1, 0.7, 2, 42],
  [0.4, 0.9, 1, 20],
  [0.9, 0.2, 3, 19],
  [0.1, 0, 1, 25]
];

var pc = d3.parcoords()("#example")
  .data(data)
  .render()
  .ticks(2)
  .tickSubdivide(true)
  .createAxes();
</script>
<h3>Brushing</h3>
<p></p>
<div id="example1" class="parcoords"></div>
<p>
Load external data from a csv file. Enable brushing by clicking and dragging on the axis lines.
</p>
<pre><a href="#" class="show-code" data-code="brushing">Show code</a></pre>
<script id="brushing">var pc1;
d3.csv('data/movies.csv', function(data) {
  pc1 = d3.parcoords()("#example1")
    .data(data)
    .render()
    .brushable();
});
</script>
<h3>Reordering</h3>
<p>
Parallel coordinates isn't just for exploring data. You can see properties of mathematical functions as well.
</p>
<p>
Check out the intersection points, curves, grids and densities created by polylines in the plot below.
Drag the axis titles to reorder the dimensions.
</p>
<div id="example2" class="parcoords"></div>
<pre><a href="#" class="show-code" data-code="reordering">Show code</a></pre>
<script id="reordering">var data2 = d3.range(0,2*Math.PI,Math.PI/40)
  .map(function(x) {
    return {
      "-x": -x,
      x: x,
      "sin(x)": Math.sin(x),
      "cos(x)": Math.cos(x),
      "atan(x)": Math.atan(x),
      "exp(x)": Math.exp(x),
      "square(x)": x*x,
      "sqrt(x)": Math.sqrt(x),
    };
  });

// get list of dimensions
var dimensions2 = d3.keys(data2[0]);
var pc2 = d3.parcoords()("#example2");

pc2.dimensions(dimensions2)
  .data(data2)
  .color("#000")
  .alpha(0.2)
  .margin({ top: 40, left: 0, bottom: 12, right: 0 })
  .render()
  .reorderable();
</script>
<h3>Coloring</h3>
<p>Set the <strong>color()</strong> to a function to color polylines based on the data</p>
<div id="example3" class="parcoords"></div>
<pre><a href="#" class="show-code" data-code="coloring">Show code</a></pre>
<script id="coloring">var data3 = d3.range(-2*Math.PI,2*Math.PI,Math.PI/40)
  .map(function(x) {
    return {
      "sin(x)": Math.sin(x),
      "cos(x)": Math.cos(x),
      "sin(x/2)": Math.sin(x/2),
      "sin(x*2)": Math.sin(x*2),
      "cos(x/2)": Math.cos(x/2),
    };
  });

var color = function(d) {
  return d3.hcl(Math.round(180*d["sin(x)"]+180), 50, 55).toString();
};

d3.parcoords()("#example3")
  .dimensions(d3.keys(data3[0]))
  .data(data3)
  .color(color)
  .alpha(0.5)
  .render()
  .margin({top: 40, left: 0, right: 0, bottom: 12})
  .brushable();
</script>
<p>For static coloring, just pass in a a color string . This group of plots is colored with <a href="https://github.com/mbostock/d3/wiki/Ordinal-Scales#wiki-category10">d3.scale.category20b()</a></p>
<div id="example-coloring-0" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-1" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-2" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-3" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-4" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-5" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-6" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-7" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-8" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-9" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-10" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-11" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-12" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-13" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-14" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-15" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-16" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-17" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-18" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-19" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div style="clear:both"></div>
<pre><a href="#" class="show-code" data-code="coloring-basic">Show code</a></pre>
<script id="coloring-basic">var colors = d3.scale.category20b(); 

d3.selectAll(".parcoords-coloring")
  .each(function(d,i) {
    var color = colors(i);

    var chart = d3.parcoords()(this)
      .data(data3.slice(7*i,7*i+30))
      .alpha(0.6)
      .color(color)
      .margin({ top: 0, left: 0, bottom: 24, right: 0 })
      .render();

    var text = chart.svg.append("text")
      .attr("x", 162)
      .attr("y", 64)
      .style("text-anchor", "end")
      .style("font-weight", "bold")
      .style("font-size", "11px")
      .style("fill", "#ddd")
      .text(colors(i))

    d3.select(this).on("mouseover", function() { text.style("fill", "#222"); });
    d3.select(this).on("mouseout", function() { text.style("fill", "#ddd"); });
  });
</script>



<h3>Compositing and Opacity</h3>
<p>Control <a href="https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Compositing">compositing<a> and opacity with <b>composite()</b> and <b>alpha()</b>.</p>
<ul>
  <li><strong>source-over</strong> (default), new lines drawn over rendered lines</li>
  <li><strong>lighter</strong>, dense intersections glow</li>
  <li><strong>darker</strong>, dense intersections darken</li>
  <li><strong>destination-over</strong>, new lines drawn underneath rendered lines</li>
</ul>
<div id="example-compositing-0" class="parcoords parcoords-compositing float" style="width:360px;height:150px"></div>
<div id="example-compositing-1" class="parcoords parcoords-compositing float" style="width:360px;height:150px"></div>
<div id="example-compositing-2" class="parcoords parcoords-compositing float" style="width:360px;height:150px"></div>
<div id="example-compositing-3" class="parcoords parcoords-compositing float" style="width:360px;height:150px"></div>
<div style="clear:both"></div>
<p class="centered">
Use this slider to change opacity!<br/>
0 <input type="range" min="0" max="1" value="0.3" step="0.01" id="compositing-opacity"/> 1
</p>
<pre><a href="#" class="show-code" data-code="compositing">Show code</a></pre>
<script id="compositing">var composite_modes = [
  "source-over",
  "lighter",
  "destination-over",
  "darker"
];

var color = d3.scale.linear()
  .domain([-1, 1])
  .range(["cadetblue", "#049"])
  .interpolate(d3.interpolateLab);

var pc_compositing = [];

d3.selectAll(".parcoords-compositing")
  .each(function(d,i) {
    var mode = composite_modes[i];
    pc_compositing[i] = d3.parcoords()(this)
      .data(data3)
      .alpha(0.3)
      .composite(mode)
      .color(function(d) { return color(Math.sin(d["sin(x)"]*10)); })
      .margin({ top: 20, left: -10, bottom: 0, right: -10 })
      .render()
      .axisDots();

    pc_compositing[i].ctx.highlight.fillText(mode, 130, 10);
  });

d3.select("#compositing-opacity").on("change", function() {
  for (mode in pc_compositing) {
    pc_compositing[mode].alpha(this.value).render();
  };
});
</script>

<script>
// Code viewer
d3.selectAll(".show-code").on("click", function(d) {
  var code = d3.select("#" + d3.select(this).attr("data-code")).text();
  d3.select(this.parentNode)
    .text(code)
  event.preventDefault();
})
</script>
