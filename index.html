<!doctype html>
<title>Parallel Coordinates</title>
<link rel="stylesheet" type="text/css" href="d3.parcoords.css">
<script src="d3.v2.js"></script>
<script src="d3.parcoords.js"></script>
<style>
  body {
    font-size: 14px;
    font-family: "Helvetica Neue", Arial, Helvetica, sans-serif;
    margin: 50px auto 20px;
    width: 720px;
    background: #fcfcfc;
    line-height: 1.45em;
  }
  a {
    color: #555;
  }
  a:hover {
    color: #000;
  }
  ul {
    margin: 0 20px;
    padding: 0;
  }
  .dark {
    background: #222;
  }
  #example,
  #example-axes,
  #example1,
  #example2,
  #example3 {
    height: 200px;
    margin: 12px 0;
  }
  p {
    width: 560px;
  }
  pre {
    color: #444;
    font-family: Ubuntu Mono, Monaco, monospace;
    padding: 4px 8px;
    background: #f2f2f2;
    border: 1px solid #ccc;
  }
  h1 small {
    font-weight: normal;
    font-size: 0.5em;
  }
  h3 {
    margin-top: 40px;
  }
  .float {
    float: left;
  }
  .centered {
    text-align: center;
  }
</style>
<a href="https://github.com/syntagmatic/parallel-coordinates"><img style="position: absolute; top: 0; right: 0; border: 0;" src="forkme.png" alt="Fork me on GitHub"></a>
<h1>Parallel Coordinates <small>(0.1.3)</small></h1>
<p>A visual toolkit for <a href="http://www.cs.ucdavis.edu/~ma/ECS289H/papers/Inselberg1997.pdf">multidimensional detectives</a>.</p>
<p><strong><a href="d3.parcoords.js">d3.parcoords.js</a></strong> <small> - requires <strong><a href="http://d3js.org/">D3.js</a></strong></small><br/>
<strong><a href="d3.parcoords.css">d3.parcoords.css</a></strong> <small> - default styles</small></p>
<p>This library is unstable and in development, but you're welcome to try it out.</p>
<ul>
  <li><a href="https://github.com/syntagmatic/parallel-coordinates#resources">Resources</a></li>
  <li><a href="https://github.com/syntagmatic/parallel-coordinates#parallel-coordinates">API Reference</a></li>
  <li><a href="https://github.com/syntagmatic/parallel-coordinates/issues">Issues</a></li>
</ul>

<h3>Let's dive in!</h3>
<div id="example" class="parcoords" style="width:360px;height:150px"></div>
<p>
Make a container div in HTML
</p>
<pre>
&lt;div id="<strong>example</strong>" class="parcoords" style="width:300px;height:150px"&gt;&lt;/div&gt;
</pre>
<p>
Make some data in JavaScript
</p>
<pre>
var <strong>data</strong> = [
  [1, 0.7, 2, 42],
  [0.4, 0.9, 1, 20],
  [0.9, 0.2, 3, 19],
  [0.1, 0, 1, 25]
];
</pre>
<p>
Create a parallel coordinates plot
</p>
<pre>
var pc = d3.parcoords()("#<strong>example</strong>")
  .data(<strong>data</strong>)
  .render()
  .createAxes();
</pre>
<script>
var data = [
  [1, 0.7, 2, 42],
  [0.4, 0.9, 1, 20],
  [0.9, 0.2, 3, 19],
  [0.1, 0, 1, 25]
];

var pc = d3.parcoords()("#example")
  .data(data)
  .render()
  .ticks(2)
  .tickSubdivide(true)
  .createAxes();
</script>
<p>That's all there is to it!</p>
<h3>Brush away the clutter</h3>
<p>D&eacute;j&agrave; vu! Have you seen <a href="http://mbostock.github.com/protovis/ex/cars.html">this chart before</a>?</p>
<p>Click and drag along an axis to brush.<br/>
Only data within the brush extents is displayed.<br/>
Brushing lets you quickly zoom in on interesting groups and outliers.</p>
<div id="example1" class="parcoords"></div>
<p>
This cars dataset is loaded from a <a href="data/cars.csv">csv file</a>.
</p>
<pre><a href="#" class="show-code" data-code="brushing">Show code</a></pre>
<p>Try reordering and removing some axes by running this code in a <a href="http://webmasters.stackexchange.com/questions/8525/how-to-open-the-javascript-console-in-different-browsers">javascript console</a>. The chart is in interactive mode, so it will re-render and update axes automatically when dimensions are updated.</p>
<pre>
pc1.dimensions([
  "0-60 mph (s)",
  "economy (mpg)",
  "power (hp)",
  "weight (lb)",
  "displacement (cc)"
]);
</pre>
<script id="brushing">// interact with this variable from a javascript console
var pc1;

// create a linear color scale
var blue_to_brown = d3.scale.linear()
  .domain([9, 50])
  .range(["steelblue", "brown"])
  .interpolate(d3.interpolateLab);

// load csv file and create the chart
d3.csv('data/cars.csv', function(data) {
  pc1 = d3.parcoords()("#example1")
    .data(data)
    .color(function(d) { return blue_to_brown(d['economy (mpg)']); })  // quantitative color scale
    .render()
    .shadows()  // background shadows
    .brushable()  // enable brushing
    .interactive()  // command line mode
});
</script>
<h3>Reorder to reveal relationships</h3>
<p>
Data for this chart is generated from built-in <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math">JavaScript math functions</a>.
</p>
<p>
Pure mathematical relationships may emerge in your explorations, though real data tends to be much noisier. The cars dataset has several roughly inverse relationships, revealed by dense crossings. The first two dimensions in this chart, <em>-x</em> and <em>x</em>, have a perfectly inverse relationship. All lines between those axes meet at a single point.
</p>
<p>
Only relationships between adjacent dimensions are revealed.<br/>
Drag the axes titles around to reorder the dimensions.
</p>
<div id="example2" class="parcoords"></div>
<pre><a href="#" class="show-code" data-code="reordering">Show code</a></pre>
<script id="reordering">var data2 = d3.range(0,2*Math.PI,Math.PI/40)
  .map(function(x) {
    return {
      "-x": -x,
      x: x,
      "sin(x)": Math.sin(x),
      "cos(x)": Math.cos(x),
      "atan(x)": Math.atan(x),
      "exp(x)": Math.exp(x),
      "square(x)": x*x,
      "sqrt(x)": Math.sqrt(x),
    };
  });

// get list of dimensions
var dimensions2 = d3.keys(data2[0]);
var pc2 = d3.parcoords()("#example2");

pc2.dimensions(dimensions2)
  .data(data2)
  .color("#000")
  .alpha(0.2)
  .margin({ top: 24, left: 0, bottom: 12, right: 0 })
  .render()
  .reorderable();
</script>
<h3>Coloring gives polylines a personality</h3>
<p>Coloring polylines based on a dimension helps you track them across many dimensions. Patches of color emerge and disappear.</p>
<div id="example3" class="parcoords"></div>
<pre><a href="#" class="show-code" data-code="coloring">Show code</a></pre>
<script id="coloring">// generate data with math functions
var data3 = d3.range(-2*Math.PI,2*Math.PI,Math.PI/40)
  .map(function(x) {
    return {
      "sin(x)": Math.sin(x),
      "cos(x)": Math.cos(x),
      "sin(x/2)": Math.sin(x/2),
      "sin(x*2)": Math.sin(x*2),
      "cos(x/2)": Math.cos(x/2),
    };
  });

// color based on the value of sin(x)
var color = function(d) {
  return d3.hcl(Math.round(180*d["sin(x)"]+180), 50, 55).toString();
};

d3.parcoords()("#example3")
  .dimensions(d3.keys(data3[0]))
  .data(data3)
  .color(color)
  .alpha(0.5)
  .render()
  .margin({top: 24, left: 0, right: 0, bottom: 12})
  .brushable();
</script>
<p>For a single color, just pass in a CSS color string. This group of plots is colored with values from <a href="https://github.com/mbostock/d3/wiki/Ordinal-Scales#wiki-category10">d3.scale.category20b()</a>.</p>
<div id="example-coloring-0" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-1" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-2" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-3" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-4" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-5" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-6" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-7" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-8" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-9" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-10" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-11" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-12" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-13" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-14" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-15" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-16" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-17" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-18" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div id="example-coloring-19" class="parcoords parcoords-coloring float" style="width:180px;height:76px"></div>
<div style="clear:both"></div>
<pre><a href="#" class="show-code" data-code="coloring-basic">Show code</a></pre>
<script id="coloring-basic">var colors = d3.scale.category20b(); 

// create a chart in every element with class "parcoords-coloring"
d3.selectAll(".parcoords-coloring")
  .each(function(d,i) {
    var color = colors(i);

    var chart = d3.parcoords()(this)
      .data(data3.slice(7*i,7*i+30))
      .alpha(0.6)
      .color(color)
      .margin({ top: 0, left: 0, bottom: 24, right: 0 })
      .render();

    // color labels
    var text = chart.svg.append("text")
      .attr("x", 162)
      .attr("y", 64)
      .style("text-anchor", "end")
      .style("font-weight", "bold")
      .style("font-size", "11px")
      .style("fill", "#ddd")
      .text(colors(i))

    // hover effect
    d3.select(this).on("mouseover", function() { text.style("fill", "#222"); });
    d3.select(this).on("mouseout", function() { text.style("fill", "#ddd"); });
  });
</script>

<h3>Compositing and Opacity</h3>
<p>Control <a href="https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Compositing">compositing</a> and opacity with <b>composite()</b> and <b>alpha()</b>, respectively. Compositing controls how pixels are combined to form the final image.
</p>
<p>
Four useful settings are:
</p>
<ul>
  <li><strong>source-over</strong> (default), new lines drawn over rendered lines</li>
  <li><strong>lighter</strong>, dense intersections glow</li>
  <li><strong>darker</strong>, dense intersections darken</li>
  <li><strong>destination-over</strong>, new lines drawn underneath rendered lines</li>
</ul>
<p>Use this slider to change alpha/opacity. The current value is <strong id="alpha-opacity">0.3</strong><br/>
<input type="range" min="0" max="1" value="0.3" step="0.01" id="compositing-opacity"/>
</p>
<div id="example-compositing-0" class="parcoords parcoords-compositing float" style="width:360px;height:120px"></div>
<div id="example-compositing-1" class="parcoords parcoords-compositing float" style="width:360px;height:120px"></div>
<div id="example-compositing-2" class="parcoords parcoords-compositing float" style="width:360px;height:120px"></div>
<div id="example-compositing-3" class="parcoords parcoords-compositing float" style="width:360px;height:120px"></div>
<div style="clear:both"></div>
<p class="centered">
</p>
<pre><a href="#" class="show-code" data-code="compositing">Show code</a></pre>
<script id="compositing">var composite_modes = [
  "source-over",
  "lighter",
  "destination-over",
  "darker"
];

var color = d3.scale.linear()
  .domain([-1, 1])
  .range(["cadetblue", "#049"])
  .interpolate(d3.interpolateLab);

// keep the charts in an array
var pc_compositing = [];

d3.selectAll(".parcoords-compositing")
  .each(function(d,i) {
    var mode = composite_modes[i];
    pc_compositing[i] = d3.parcoords()(this)
      .data(data3)
      .alpha(0.3)
      .composite(mode)
      .color(function(d) { return color(Math.sin(d["sin(x)"]*10)); })
      .margin({ top: 20, left: -10, bottom: 0, right: -10 })
      .render()
      .axisDots();

    pc_compositing[i].ctx.highlight.fillText(mode, 130, 10);
  });

// opacity slider
d3.select("#compositing-opacity").on("change", function() {
  d3.select("#alpha-opacity").text(Math.round(this.value*100)/100);
  for (mode in pc_compositing) {
    pc_compositing[mode].alpha(this.value).render();
  };
});
</script>

<h3>More on the way...</h3>

<p>This library is in active development, so keep an eye out for new features and documentation. Major changes will be announced on the <a href="https://groups.google.com/forum/?fromgroups#!forum/d3-js">d3.js mailing list</a>, or you can <a href="https://github.com/syntagmatic/parallel-coordinates">watch the GitHub repository</a> to track every change.</p>

<p>
For past versions of parallel coordinates that demonstrate various features and techniques, see this <a href="http://bl.ocks.org/syntagmatic">list of bl.ocks</a>.
</p>

<h3>Changes</h3>

<p>
  1.3: shadows<br/>
  1.2: interactive mode for console use<br/>
  1.1: reorderAxes is now updateAxes, and can transition adding/removing/reordering dimensions<br/>
  1.0: initial relase
</p>

<script>
// Code viewer
d3.selectAll(".show-code").on("click", function(d) {
  var code = d3.select("#" + d3.select(this).attr("data-code")).text();
  d3.select(this.parentNode)
    .text(code)
  event.preventDefault();
})
</script>
